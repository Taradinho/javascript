// BloggerJS v0.4.0
// Licensed under the MIT License
// Copyright (c) 2017-2018 Kenny Cruz
// github.com/jokenox

// Configuration
var config = {postsDatePrefix:false,accessOnly:false,useApiV3:true,apiKey:"AIzaSyDqhJ_ByUCEsS7xvl3kjffUCgjVOK8Vbbg"}
var postsOrPages=["pages","posts"],blogId="<data:blog.blogId/>",urlTotal,fetchIndex=1,ampChar="&amp;"[0],secondRequest=!0,feedPriority=0,nextPageToken;function urlVal(){var b=window.location.pathname;var a=b.length;var c=b.substring(a-5);if(c===".html"){return 0}else{if(a>1){return 1}else{return 2}}}function urlMod(){var a=window.location.pathname;if(a.substring(1,2)==="p"){a=a.substring(a.indexOf("/",1)+1);a=a.substr(0,a.indexOf(".html"));history.replaceState(null,null,"../"+a)}else{if(!config.postsDatePrefix){a=a.substring(a.indexOf("/",7)+1)}else{a=a.substring(1)}a=a.substr(0,a.indexOf(".html"));history.replaceState(null,null,"../../"+a)}}function urlSearch(c,a){var b=c+".html";a.forEach(function(d){var e=d.search(b);if(e!==-1){window.location=d}})}function urlManager(){var a=urlVal();if(a===0){if(!config.accessOnly){urlMod()}}else{if(a===1){fetchData(postsOrPages[feedPriority],1)}else{if(a===2){if(!config.accessOnly){history.replaceState(null,null,"/")}}}}}function fetchData(c,a){var d=document.createElement("script");if(config.useApiV3){var b="https://www.googleapis.com/blogger/v3/blogs/"+blogId+"/"+c+"?key="+config.apiKey+"#maxResults=500#fields=nextPageToken%2Citems(url)#callback=parseData";if(nextPageToken){b+="#pageToken="+nextPageToken}nextPageToken=undefined}else{var b=window.location.protocol+"//"+window.location.hostname+"/feeds/"+c+"/summary?start-index="+a+"#max-results=150#orderby=published#alt=json-in-script#callback=parseData"}b=b.replace(/#/g,ampChar);d.type="text/javascript";d.src=b;document.getElementsByTagName("head")[0].appendChild(d)}function parseData(c){var a=[];if(!config.useApiV3){if(!urlTotal){urlTotal=parseInt(c.feed.openSearch$totalResults.$t)}try{c.feed.entry.forEach(function(d,f){var e=c.feed.entry[f];e.link.forEach(function(g,h){if(e.link[h].rel==="alternate"){a.push(e.link[h].href)}})})}catch(b){}}else{try{c.items.forEach(function(d,e){a.push(d.url)})}catch(b){}nextPageToken=c.nextPageToken}urlSearch(window.location.pathname,a);if(urlTotal>150){fetchIndex+=150;urlTotal-=150;fetchData(postsOrPages[feedPriority],fetchIndex)}else{if(nextPageToken){fetchData(postsOrPages[feedPriority])}else{if(secondRequest){nextPageToken=undefined;urlTotal=0;fetchIndex=1;secondRequest=!1;if(feedPriority===0){feedPriority=1;fetchData("posts",1)}else{if(feedPriority===1){feedPriority=0;fetchData("pages",1)}}}}}}function bloggerJS(a){if(a){feedPriority=a}urlManager()}bloggerJS()